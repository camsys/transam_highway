.row
  .col-sm-12#elements_panel
    .panel.panel-default
      .panel-heading
        %h3.panel-title
          %a{data: {toggle: 'collapse'}, href: '#collapse-elements'}
            Elements
            %span.badge= @inspection.elements.count
          - if can?(:update, @inspection.inspection)
            .btn-group.pull-right.panel-action
              %div
                %button.btn.btn-primary.edit-elements-button
                  Edit
              .save-elements-buttons{style: 'display: none;'}
                %button.btn.btn-primary.save-elements-button
                  Save
                %button.btn.btn-primary.cancel-elements-button
                  Cancel
      #collapse-elements.panel-collapse.collapse.in
        .panel-body
          = render 'elements_table'

:javascript
  $(function() {
    $('.edit-elements-button').on('click', function() {
      $('.edit-elements-button').hide();
      $('.save-elements-buttons').show();
      enable_quantity_editing();
    });
    $('.save-elements-button').on('click', function() {
      if(validate_quantity()) {
        submit_element_changes();
      }
    });
    $('.cancel-elements-button').on('click', function() {
      // reload
      window.location.href = "#{inspection_path(@inspection.object_key, anchor: 'collapse-elements')}";
      window.location.reload();
    });
  });