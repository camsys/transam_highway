= simple_form_for(:transam_workflow_model_proxy,
  :html => {:class => 'form-vertical', :id => 'ready_assignments_form'},
  :url => fire_workflow_events_transam_workflow_index_path,
  :wrapper => :vertical_form,
  :wrapper_mappings => {:check_boxes => :vertical_radio_and_checkboxes,
  :radio_buttons => :vertical_radio_and_checkboxes,
  :file => :vertical_file_input,
  :boolean => :vertical_boolean}) do |f|

  = f.input :global_ids, as: :hidden
  = f.input :event_name, as: :hidden, input_html: {value: 'make_ready'}
  = f.input :include_updates, as: :hidden, input_html: {value: '1'} # field updates

  .row
    .col-sm-6= f.input :inspector_ids, collection: User.active

  = f.button :submit, 'Assign', :class => "btn btn-primary"

:javascript

  $('#ready_assignments_form').validate({
    submitHandler: function(form){
      var selected = $('#inspection-table').bootstrapTable('getSelections');
      selected_rows = new Set();
      for (i = 0; i < selected.length; i++) {
        var insp_key = selected[i][1];
        if(!selected_rows.has(insp_key)) {
          selected_rows.add(insp_key);
        }
      }

      $('#ready_assignments_form #transam_workflow_model_proxy_global_ids').val(Array.from(selected_rows));
      form.submit();
    }
  });
