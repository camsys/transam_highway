:ruby
  table_dom_id = SecureRandom.hex

.table-responsive
  %table.table.table-hover{:id => table_dom_id,
          :data => {:toggle => 'table',
          :card_view => "false",
          :pagination => 'true',
          :sort_order => 'asc',
          :sortable => 'true',
          :side_pagination => 'server',
          :show_pagination_switch => 'true',
          :page_number => '1',
          :page_list => "[5, 10, 20, 50, 100, 200]",
          :page_size => current_user.num_table_rows,
          :search => 'false',
          :show_columns => 'true',
          :toolbar => "#table_actions",
          :row_style => 'row_style',
          :click_to_select => 'true',
          :show_export => 'true',
          :id_field => 'object_key',
          :export_types => "['csv', 'txt', 'excel']",
          :state_save => 'true',
          :state_save_id_table => "inspections_id",
          :state_save_expire => "1y",
          :maintain_selected => 'true',
          :single_select => 'false'}}
    %thead
      %tr
        %th.center{:data => {:sortable => 'true'}} Elm/Env
        %th.center{:data => {:sortable => 'true'}} Description
        %th.center{:data => {:sortable => 'true'}} EPN
        %th.center{:data => {:sortable => 'true'}} Unit
        %th.center{:data => {:sortable => 'true'}} Total Quantity
        %th.center{:data => {:sortable => 'true'}} CS 1
        %th.center{:data => {:sortable => 'true'}} CS 2
        %th.center{:data => {:sortable => 'true'}} CS 3
        %th.center{:data => {:sortable => 'true'}} CS 4

    %tbody
      - @inspection.elements.each do |element|
        %tr
          %td.left= element.element_definition
          %td.left= element.element_definition.short_name
          %td.left TODO
          %td.left= element.element_definition.quantity_unit
          %td.left= element.quantity
          %td.left= element.quantity - element.defects.sum('condition_state_2_quantity + condition_state_3_quantity + condition_state_4_quantity')
          %td.left= element.defects.sum(:condition_state_2_quantity)
          %td.left= element.defects.sum(:condition_state_3_quantity)
          %td.left= element.defects.sum(:condition_state_4_quantity)